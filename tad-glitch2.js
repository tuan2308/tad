if(window.location.hostname==tmbq){const image=document.createElement("img");const canvas=document.getElementById("Canvas");const rOffsetInput=document.getElementById("rOffset");const gOffsetInput=document.getElementById("gOffset");const bOffsetInput=document.getElementById("bOffset");document.getElementById("chonnen").onchange=function(a){image.onload=Vechonnen;image.onerror=failed;image.src=URL.createObjectURL(this.files[0])};function Vechonnen(){var max=500;var a=canvas.getContext("2d");a.drawImage(image,0,0);document.getElementById("avt-chonnen").style.backgroundImage="url('"+image.src+"')";rOffsetInput.value=0;gOffsetInput.value=0;bOffsetInput.value=0;init();document.getElementById("tad-xlha").style.display="block";}
function failed(){alert("Lá»—i")}
function init(){const ctx=canvas.getContext("2d");var width=image.naturalWidth;var height=image.naturalHeight;var max=2000;if(image.width<=max||image.height<=max){setcv();}else{if(image.width>=image.height){if(image.width>max){let scale=max/image.width;width=max;height=image.height*scale;setcv();}}
if(image.width<=image.height){if(image.height>max){let scale=max/image.height;height=max;width=image.width*scale;setcv();}}}
function setcv(){canvas.width=width;canvas.height=height;}
ctx.drawImage(image,0,0,width,height);const imageData=ctx.getImageData(0,0,width,height);rOffsetInput.addEventListener("input",updateCanvas);gOffsetInput.addEventListener("input",updateCanvas);bOffsetInput.addEventListener("input",updateCanvas);function updateCanvas(){const updatedImageData=rgbSplit(imageData,{rOffset:Number(rOffsetInput.value),gOffset:Number(gOffsetInput.value),bOffset:Number(bOffsetInput.value),});ctx.putImageData(updatedImageData,0,0);}}
function rgbSplit(imageData,options){const{rOffset=0,gOffset=0,bOffset=0}=options;const arr=new Uint8ClampedArray(imageData.data);for(let i=0;i<arr.length;i+=4){arr[i+0+rOffset*4]=imageData.data[i+0];arr[i+1+gOffset*4]=imageData.data[i+1];arr[i+2+bOffset*4]=imageData.data[i+2];}
return new ImageData(arr,imageData.width,imageData.height);}
function saveimg(){canvas.toBlob(function(blob){var bloburl=URL.createObjectURL(blob);var a=document.createElement("a");a.href=bloburl;a.setAttribute("download","taoanhdep--glitch.jpg");a.click();},'image/jpeg',1.0)}}