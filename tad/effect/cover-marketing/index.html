<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link as='style' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css'
        media='all' rel='stylesheet' />

    <script crossorigin='anonymous'
        integrity='sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=='
        src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js'></script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" media="all">

</head>

<body>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" integrity="sha512-0SPWAwpC/17yYyZ/4HSllgaK7/gg9OlVozq8K7rf3J8LvCjYEEIfzzpnA2/SSjpGIunCSD18r3UhvDcu/xncWA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <script src="../testcr.js" type="text/javascript"></script>
    <script src="./tad-crop-cimg-dk.js" type="text/javascript"></script>



    <label>Upload ảnh</label>
    <div class="xulyhinhanh mb-2">
    <div class="chonanh-avt">
        <div class="img-preview" style="width: 36px; height: 36px;"><img crossorigin="anonymous" src="https://1.bp.blogspot.com/-z3RZ2G93tVo/YHES6yUdnzI/AAAAAAAArsw/Jq_pD24Pn-sEW-XwzGl18qlgIYQZZOeqgCNcBGAsYHQ/s0/blank.png?timestamp=1629977090487" alt="Tạo ảnh đẹp" style="display: block; width: 100px; height: 100px; min-width: 0px !important; min-height: 0px !important; max-width: none !important; max-height: none !important; transform: none;"></div>
        </div>
        <button type="button" class="btn btn-primary btn-chonanh" data-toggle="modal" data-target="#chonanhModal">
            <i class="fas fa-upload"></i> Chọn ảnh
            </button>
            <div class="modal fade" id="chonanhModal" tabindex="-1" role="dialog" aria-labelledby="chonanhModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="chonanhModalLabel">Chọn ảnh từ thiết bị</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&#215;</span>
                </button>
                </div>
                <div class="modal-body">
                <div id="actions">
                <div class="docs-buttons">
                <label class="btn btn-primary btn-upload btn-upanh" for="inputImage" title="Upload image file">
                <input type="file" class="sr-only" id="inputImage" name="file" accept=".jpg,.jpeg,.png,.gif,.bmp,.tiff">
                <span><i class="fas fa-upload"></i> Chọn ảnh</span>
                </label>
                <div class="cropanh-container mt-2" style="display:none">
                <div class="img-container">
                <img alt="Tạo ảnh đẹp" src="https://1.bp.blogspot.com/-z3RZ2G93tVo/YHES6yUdnzI/AAAAAAAArsw/Jq_pD24Pn-sEW-XwzGl18qlgIYQZZOeqgCNcBGAsYHQ/s0/blank.png">
                </div>
                <div class="d-flex float-right">
                <div class="btn-group mr-2">
                <button type="button" class="btn btn-primary" data-method="rotate" data-option="-45" title="Rotate Left">
                <i class="fa fa-undo"></i>
                </button>
                <button type="button" class="btn btn-primary" data-method="rotate" data-option="45" title="Rotate Right">
                <i class="fa fa-redo"></i>
                </button>
                </div>
                <div class="btn-group mr-2">
                <button type="button" class="btn btn-primary" data-method="scaleX" data-option="-1" title="Flip Horizontal">
                <i class="fa fa-arrows-alt-h"></i>
                </button>
                <button type="button" class="btn btn-primary" data-method="scaleY" data-option="-1" title="Flip Vertical">
                <i class="fa fa-arrows-alt-v"></i>
                </button>
                </div>
                <button type="button" class="btn btn-primary" id="cropanh" data-method="getCroppedCanvas" data-dismiss="modal" data-option="{ &quot;width&quot;: 1000, &quot;height&quot;: 1000}">
                Cắt ảnh
                </button>
                </div>
                </div>
                </div>
                </div>
                </div>
                </div>
                </div>
                </div>
            </div>
<label><b>Nhập tên*</b></label>
<input type="text" class="form-control tad-in-text5 mb-2" value="Tạo ảnh đẹp" placeholder="Nhập tên">
    
            
    <label><b>Nhập tên*</b></label>
    <input type="text" class="form-control tad-in-text1 mb-2" placeholder="Nhập tên">
    
    
    <label><b>Nhập tên*</b></label>
    <textarea class="form-control tad-in-texta" rows="3" placeholder="Nhập caption">Nhận tất cả dịch vụ về xương khớp
Receive all osteoarthritis services
sdasdf</textarea>

        <label>Nhập thông tin liên hệ</label>
        <input type="text" class="form-control tad-in-text2 mb-2" placeholder="facebook">
        <input type="text" class="form-control tad-in-text3 mb-2" placeholder="email">
        <input type="text" class="form-control tad-in-text4 mb-2" placeholder="phone">
  

        <div class="mt-3">
            <button type="button" class="btn btn-primary disabled d-block" id="tad-taoanh"><i class="fas fa-cut"></i> Tạo
                ảnh</button>
        </div>
        <div id="img-out"></div>



    <canvas id="temp" width="2000" height="760" style="width: 100%;"></canvas>

    <link href='https://cdn.taoanhdep.com/tad/uploads/fonts/cover1/stylesheet.css' media='all' rel='stylesheet' />

    <script>
var tyle= 1/1; vmode = 1;
var tenanhxuat = "cover_marketing";


$("#tad-taoanh").click(function() {

$("#cropanh").click();
       
           $("#img-out").hide();
           $("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");

           draw();

           
       });


       draw();

function draw(){
        document.fonts.load('10pt "iCiel Fester Semi-Condensed"').then(function () {
            document.fonts.load('10pt "UTM-Avo"').then(function () {

                var a = new Image();
                a.crossOrigin = "Anonymous";
                a.src = "https://cdn.taoanhdep.com/tad/uploads/images/cover1.png";
                a.onload = function () {

                    var b = new Image();
                    b.crossOrigin = "Anonymous";
                    b.src = "https://1.bp.blogspot.com/-KInPt84lAkw/YTHe56D_j9I/AAAAAAAAw88/sg1-Z3A8yKAEOSbWLM84ikPtc0rnUmIbQCNcBGAsYHQ/s0/mask.png";
                    b.onload = function () {

                        var cc = new Image();
                    cc.crossOrigin = "Anonymous";
                    cc.src = "https://1.bp.blogspot.com/-C6ac9ris0sc/YTMchbZOJ1I/AAAAAAAAw94/9PLlIZNcrLUpsDyJS9r5bYG6__JMGHjBgCNcBGAsYHQ/s0/tich.png";
                    cc.onload = function () {

                        var t1= $(".tad-in-text1").val();

var texta = $(".tad-in-texta").val();

var t2= $(".tad-in-text2").val();
var t3= $(".tad-in-text3").val();
var t4= $(".tad-in-text4").val();
var t5= $(".tad-in-text5").val();
                        var c = document.getElementById("temp");
                        var ctx = c.getContext("2d");
                        ctx.clearRect(0, 0, c.width, c.height);

                        ctx.save();

               
                        ctx.drawImage(b, 0, 0, c.width, c.height);

                        ctx.drawImage(a, 0, 0, c.width, c.height);

  ctx.restore();
                        ctx.save();
                        
                        ctx.beginPath();
                        ctx.translate(c.width/2 -  430/2, 162);
                        ctx.arc( 430/2,  430/2, 430/2, 0, Math.PI * 2, true);
                        ctx.lineWidth = 20;
                        ctx.strokeStyle = "#fff";
                        ctx.stroke();
                        ctx.closePath();
                        ctx.clip();
                        ctx.drawImage(cimg, 0, 0, 430, 430);
                        ctx.restore();


                        ctx.save();
               var gradient = ctx.createLinearGradient(0, 0, 0, 760);
      gradient.addColorStop(0.83, "#4fcfea");
      gradient.addColorStop(0.93, "#403abb");
      ctx.fillStyle = gradient;
      ctx.textAlign = "center";

      ctx.font = "bold 53px UTM-Avo";
      ctx.fillText(t5.toUpperCase(), c.width/2, 700);

      ctx.restore();

                      
                        ctx.save();
               
                        ctx.font = "50px iCiel Fester Semi-Condensed";
                        ctx.fillStyle = "#fff";
                        var tw = ctx.measureText(t1).width;
                        ctx.fillText(t1, 100, 100);

                        ctx.fillText("Contact", 1415, 485);

                        ctx.restore();

                        ctx.drawImage(cc, tw + 110, 57, 47, 47);


                        ctx.save();
                        ctx.font = "30px UTM-Avo";
                        ctx.fillStyle = "#fff";
                       
                        ctx.fillText(t2, 1480, 545);
                        ctx.fillText(t3, 1480, 615);
                        ctx.fillText(t4, 1480, 685);
                        ctx.restore();

                        ctx.save();
                        ctx.fillStyle = "#fff";
                        ctx.font = '27px UTM-Avo';
                        var x = 100;
                        var y = 150;
                        var lineheight = 40;
                        var lines = texta.split('\n');
       
                        for (var i = 0; i < lines.length; i++)

                        ctx.fillText(lines[i], x, y + (i * lineheight));


                        ctx.restore();

                        ctx.save();
                        ctx.fillStyle = "#6186d9";
                        ctx.fillRect(70,50,10,80 + (i * lineheight) )

                        ctx.restore();


                    }
                    
                }
            }
        }) })
    }


    </script>



</body>

</html>